{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import { Random } from 'random-js';\nconst random = new Random();\n\nconst prizes = [\n  { symbol: 'ðŸª™', weight: 3 },\n  { symbol: 'ðŸ’', weight: 3 },\n  { symbol: 'ðŸ‹', weight: 3 },\n  { symbol: 'â­', weight: 2 },\n  { symbol: 'ðŸ’µ', weight: 2 },\n  { symbol: '7ï¸âƒ£', weight: 1 },\n  { symbol: 'ðŸ””', weight: 3 },\n];\n\nconst numOfSpinsDisplay = document.querySelector('.number-of-spins');\nlet numberOfSpins = JSON.parse(localStorage.getItem('numberOfSpins')) || 0;\nnumOfSpinsDisplay.textContent = numberOfSpins;\n\nconst slots = {\n  slot1: document.querySelector('.slot1'),\n  slot2: document.querySelector('.slot2'),\n  slot3: document.querySelector('.slot3'),\n};\n\nconst spinButton = document.querySelector('.spin-button');\nconst text = document.querySelector('.text');\nconst moneyDisplay = document.querySelector('.money-display-number');\nlet money = parseFloat(JSON.parse(localStorage.getItem('money'))) || 100.0;\nmoneyDisplay.textContent = money.toFixed(2);\n\nconst ranges = [];\nlet totalWeight = 0;\nfunction calcRanges() {\n  ranges.length = 0;\n  let acc = 0;\n\n  prizes.forEach(curr => {\n    const range = {\n      symbol: curr.symbol,\n      start: acc,\n      end: acc + curr.weight - 1,\n    };\n\n    ranges.push(range);\n    acc += curr.weight;\n  });\n\n  totalWeight = acc;\n}\n\ncalcRanges();\n\nspinButton.addEventListener('click', e => {\n  numberOfSpins++;\n  numOfSpinsDisplay.textContent = numberOfSpins;\n  localStorage.setItem('numberOfSpins', JSON.stringify(numberOfSpins));\n\n  if (money < 1) {\n    text.textContent = 'Not enough money!';\n    return;\n  }\n\n  spinButton.setAttribute('disabled', '');\n  money -= 1;\n  Object.keys(slots).forEach((slot, index) => {\n    setTimeout(() => {\n      slots[slot].textContent = getRandomSymbol();\n    }, 200 * index);\n  });\n\n  setTimeout(() => {\n    spinButton.removeAttribute('disabled', '');\n    let lastMoney = money;\n\n    setText();\n\n    let delta = money - lastMoney;\n    if (delta > 0) {\n      text.textContent += ` (+$${delta.toFixed(2)})`;\n    } else if (delta === 0) {\n      text.textContent += ` (No win)`;\n    } else {\n      text.textContent += ` (-$1.00 spin)`;\n    }\n\n    if (numberOfSpins % 10 === 0) {\n      text.textContent += '\\n Bonus Spin! ðŸŽ +1';\n      money += 1;\n    }\n  }, 210 * 3);\n});\n\nfunction setText() {\n  const s1 = slots.slot1.textContent;\n  const s2 = slots.slot2.textContent;\n  const s3 = slots.slot3.textContent;\n\n  if (s1 === s2 && s2 === s3) {\n    switch (s1) {\n      case 'ðŸª™':\n        money += 5;\n        break;\n      case 'ðŸ’':\n        money += 3;\n        break;\n      case 'ðŸ‹':\n        money += 2;\n        break;\n      case 'â­':\n        money += 4;\n        break;\n      case 'ðŸ’µ':\n        money += 25;\n        break;\n      case '7ï¸âƒ£':\n        money *= 3;\n        break;\n      case 'ðŸ””':\n        money += 3;\n        break;\n    }\n    text.textContent = 'You won!';\n  } else if (s1 === s2 || s2 === s3 || s1 === s3) {\n    let selectedSlot = s2 === s3 ? s2 : s1;\n    switch (selectedSlot) {\n      case 'ðŸª™':\n        money += 2;\n        break;\n      case 'ðŸ’':\n        money += 1.5;\n        break;\n      case 'ðŸ‹':\n        money += 1;\n        break;\n      case 'â­':\n        money += 2;\n        break;\n      case 'ðŸ’µ':\n        money += 10;\n        break;\n      case '7ï¸âƒ£':\n        money *= 1.5;\n        break;\n      case 'ðŸ””':\n        money += 1;\n        break;\n    }\n    text.textContent = 'So close!';\n  } else {\n    money += 0.2;\n    text.textContent = 'Better luck next time!';\n  }\n\n  localStorage.setItem('money', JSON.stringify(money.toFixed(2)));\n  moneyDisplay.textContent = money.toFixed(2);\n}\n\nfunction getRandomSymbol() {\n  const randomValue = random.integer(0, totalWeight - 1);\n  return ranges.find(\n    elem => elem.start <= randomValue && elem.end >= randomValue\n  ).symbol;\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const shopButton = document.querySelector('.shop-button');\n  const shop = document.querySelector('.shop');\n\n  shopButton.addEventListener('click', () => {\n    shop.classList.toggle('open');\n  });\n});\n"],"names":["random","Random","prizes","numOfSpinsDisplay","numberOfSpins","slots","spinButton","text","moneyDisplay","money","ranges","totalWeight","calcRanges","acc","curr","range","e","slot","index","getRandomSymbol","lastMoney","setText","delta","s1","s2","s3","randomValue","elem","shopButton","shop"],"mappings":"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"}