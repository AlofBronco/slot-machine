{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import { Random } from 'random-js';\nconst random = new Random();\n\nconst prizes = [\n  { symbol: '🪙', weight: 4 },\n  { symbol: '🍒', weight: 4 },\n  { symbol: '🍋', weight: 5 },\n  { symbol: '⭐', weight: 5 },\n  { symbol: '💵', weight: 3 },\n  { symbol: '7️⃣', weight: 1 },\n  { symbol: '🔔', weight: 6 },\n];\n\nconst slots = {\n  slot1: document.querySelector('.slot1'),\n  slot2: document.querySelector('.slot2'),\n  slot3: document.querySelector('.slot3'),\n};\nconst spinButton = document.querySelector('.spin-button');\nconst text = document.querySelector('.text');\nconst moneyDisplay = document.querySelector('.money-display-number');\nlet money = parseFloat(JSON.parse(localStorage.getItem('money'))) || 100.0;\nmoneyDisplay.textContent = money.toFixed(2);\n\nconst ranges = [];\nlet totalWeight = 0;\nfunction calcRanges() {\n  ranges.length = 0;\n  let acc = 0;\n\n  prizes.forEach(curr => {\n    const range = {\n      symbol: curr.symbol,\n      start: acc,\n      end: acc + curr.weight - 1,\n    };\n\n    ranges.push(range);\n    acc += curr.weight;\n  });\n\n  totalWeight = acc;\n}\n\ncalcRanges();\n\nspinButton.addEventListener('click', e => {\n  if (money < 1) {\n    text.textContent = 'Not enough money!';\n    return;\n  }\n  spinButton.setAttribute('disabled', '');\n  money -= 1;\n  Object.keys(slots).forEach((slot, index) => {\n    const symbolChange = setInterval(() => {\n      slots[slot].textContent = getRandomSymbol();\n    }, 10);\n    setTimeout(() => {\n      clearInterval(symbolChange);\n      slots[slot].textContent = getRandomSymbol();\n    }, 200 * index);\n  });\n\n  setTimeout(() => {\n    spinButton.removeAttribute('disabled', '');\n    setText();\n  }, 210 * 3);\n});\n\nfunction setText() {\n  const s1 = slots.slot1.textContent;\n  const s2 = slots.slot2.textContent;\n  const s3 = slots.slot3.textContent;\n\n  if (s1 === s2 && s2 === s3) {\n    switch (s1) {\n      case '🪙':\n        money += 10;\n        break;\n      case '🍒':\n        money *= 1.1;\n        break;\n      case '🍋':\n        money *= 1.05;\n        break;\n      case '⭐':\n        money += 5;\n        break;\n      case '💵':\n        money += 100;\n        break;\n      case '7️⃣':\n        money *= 10;\n        break;\n      case '🔔':\n        money += 1;\n        break;\n    }\n    text.textContent = 'You won!';\n  } else if (s1 === s2 || s2 === s3 || s1 === s3) {\n    let selectedSlot;\n    if (s2 === s3) {\n      selectedSlot = s2;\n    } else {\n      selectedSlot = s1;\n    }\n    switch (selectedSlot) {\n      case '🪙':\n        money += 5;\n        break;\n      case '🍒':\n        money *= 1.05;\n        break;\n      case '🍋':\n        money *= 1.025;\n        break;\n      case '⭐':\n        money += 2.5;\n        break;\n      case '💵':\n        money += 50;\n        break;\n      case '7️⃣':\n        money *= 5;\n        break;\n      case '🔔':\n        money += 0.5;\n        break;\n    }\n    text.textContent = 'So close!';\n  } else {\n    text.textContent = 'Better luck next time!';\n  }\n\n  localStorage.setItem('money', JSON.stringify(money.toFixed(2)));\n  moneyDisplay.textContent = money.toFixed(2);\n}\n\nfunction getRandomSymbol() {\n  const randomValue = random.integer(0, totalWeight - 1);\n  return ranges.find(\n    elem => elem.start <= randomValue && elem.end >= randomValue\n  ).symbol;\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const shopButton = document.querySelector('.shop-button');\n  const shop = document.querySelector('.shop');\n\n  shopButton.addEventListener('click', () => {\n    shop.classList.toggle('open');\n  });\n});\n"],"names":["random","Random","prizes","slots","spinButton","text","moneyDisplay","money","ranges","totalWeight","calcRanges","acc","curr","range","e","slot","index","symbolChange","getRandomSymbol","setText","s1","s2","s3","selectedSlot","randomValue","elem","shopButton","shop"],"mappings":"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"}